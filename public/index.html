<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beauty Hive Studio</title>

    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '809511211491558');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=809511211491558&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->

    <link rel="icon" type="image/svg+xml" href="beautyhive3.svg">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            color: #4A4A4A;
        }

        .font-playfair {
            font-family: 'Playfair Display', serif;
        }

        .accent-color {
            color: #C0A99A;
        }

        .brown-bg {
            background-color: #6C544E;
        }

        .light-brown-bg {
            background-color: #C0A99A;
        }

        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #4A4A4A;
        }

        .social-link:hover {
            background-color: #4A4A4A;
        }

        .social-link svg {
            color: #4A4A4A;
            transition: color 0.3s ease;
        }

        .social-link:hover svg {
            color: white;
        }
        .portfolio-btn {
            background-color: white;
            color: #4A4A4A;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .portfolio-btn.active, .portfolio-btn:hover {
            background-color: #6C544E;
            color: white;
        }

        /* Modal styles */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-content-container {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .modal-content {
            display: block;
            margin: auto;
            max-width: 100%;
            max-height: 100%;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }

        .modal-close:hover,
        .modal-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        /* Play button overlay for videos */
        .video-overlay-container {
            position: relative;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }

        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: white;
            opacity: 0.8;
            pointer-events: none;
        }

        /* FLEX UTILITY TO ENSURE EQUAL HEIGHTS FOR COLUMNS */
        @media (min-width: 768px) {
            #nail-care-grid {
                /* Centering the two columns on large screens to reduce their overall footprint */
                max-width: 960px;
                margin-left: auto;
                margin-right: auto;

                display: flex;
                align-items: stretch;
            }
            #nail-care-grid > div {
                flex: 1;
            }

            /* Force the inner white content boxes to match height */
            .nail-care-content {
                height: 100%;
                display: flex;
                flex-direction: column;
            }
            .nail-care-list-container {
                flex-grow: 1;
                /* Applying min-height to ensure balance across the narrow column design */
                min-height: 380px;
            }
            /* Adjust padding/margins for better wrapping/filling */
            .nail-care-list-container {
                padding: 1.5rem !important; /* Increase vertical padding */
            }
            .nail-care-list-container p {
                margin-bottom: 1rem !important; /* Increase vertical spacing between points */
            }
            .nail-care-list-container p:last-child {
                margin-bottom: 0 !important;
            }
        }

        /* Instagram Feed Widget Styles */
        .insta-control-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background-color: white;
            color: #4A4A4A;
            font-weight: 500;
            border-radius: 9999px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .insta-control-btn:hover {
            background-color: #F8F6F4;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
        }

        .insta-control-btn.active {
            background-color: #6C544E;
            color: white;
            border-color: #6C544E;
        }

        .insta-post-card {
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            background-color: #f0f0f0;
        }

        .insta-post-card:hover {
            transform: scale(1.05);
        }

        .insta-post-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .insta-post-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            color: white;
            padding: 1rem;
        }

        .insta-post-card:hover .insta-post-overlay {
            opacity: 1;
        }

        .insta-post-stats {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .insta-post-stat {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Grid layouts */
        .insta-grid-view {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        @media (min-width: 768px) {
            .insta-grid-view {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .insta-grid-view {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .insta-grid-view .insta-post-card {
            aspect-ratio: 1;
        }

        /* Masonry layout */
        .insta-masonry-view {
            column-count: 2;
            column-gap: 1rem;
        }

        @media (min-width: 768px) {
            .insta-masonry-view {
                column-count: 3;
            }
        }

        @media (min-width: 1024px) {
            .insta-masonry-view {
                column-count: 4;
            }
        }

        .insta-masonry-view .insta-post-card {
            break-inside: avoid;
            margin-bottom: 1rem;
        }

        /* List layout */
        .insta-list-view {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .insta-list-view .insta-post-card {
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: visible;
        }

        .insta-list-view .insta-post-card img {
            border-radius: 0;
            aspect-ratio: 1;
        }

        .insta-list-view .insta-post-card:hover {
            transform: none;
        }

        .insta-list-caption {
            padding: 1rem;
            text-align: left;
        }

        .insta-list-caption h4 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .insta-list-caption p {
            color: #4A4A4A;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Video indicator */
        .insta-video-indicator {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: white;
            font-size: 0.75rem;
            z-index: 10;
        }

        /* Hide Elfsight branding badge */
        .eapps-link,
        a[href*="elfsight"],
        div[class*="elfsight"][class*="branding"],
        div[class*="eapps"][class*="badge"],
        [class*="eapps-instagram-feed-branding"],
        [class*="elfsight-app-"][class*="-branding"] {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }

        /* Carousel layout */
        .insta-carousel-view {
            position: relative;
            overflow: hidden;
            max-width: 800px;
            margin: 0 auto;
        }

        .insta-carousel-track {
            display: flex;
            transition: transform 0.5s ease;
            gap: 1rem;
        }

        .insta-carousel-view .insta-post-card {
            min-width: 100%;
            flex-shrink: 0;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 10;
            transition: all 0.3s ease;
        }

        .carousel-nav:hover {
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .carousel-nav-prev {
            left: 1rem;
        }

        .carousel-nav-next {
            right: 1rem;
        }

        .carousel-dots {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ccc;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
        }

        .carousel-dot.active {
            background: #6C544E;
            width: 24px;
            border-radius: 5px;
        }

        /* Slider layout */
        .insta-slider-view {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            overflow: hidden;
        }

        .insta-slider-track {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 1rem;
            scrollbar-width: thin;
            scrollbar-color: #C0A99A #f1f1f1;
        }

        .insta-slider-track::-webkit-scrollbar {
            height: 8px;
        }

        .insta-slider-track::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .insta-slider-track::-webkit-scrollbar-thumb {
            background: #C0A99A;
            border-radius: 4px;
        }

        .insta-slider-track::-webkit-scrollbar-thumb:hover {
            background: #6C544E;
        }

        .insta-slider-view .insta-post-card {
            min-width: 280px;
            max-width: 280px;
            flex-shrink: 0;
            aspect-ratio: 1;
        }

        @media (min-width: 768px) {
            .insta-slider-view .insta-post-card {
                min-width: 320px;
                max-width: 320px;
            }
        }

        .slider-nav {
            position: absolute;
            top: 40%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 10;
            transition: all 0.3s ease;
        }

        .slider-nav:hover {
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .slider-nav-prev {
            left: 0.5rem;
        }

        .slider-nav-next {
            right: 0.5rem;
        }

        /* Search box */
        .insta-search-box {
            max-width: 500px;
            margin: 0 auto 1.5rem;
            position: relative;
        }

        .insta-search-input {
            width: 100%;
            padding: 0.75rem 3rem 0.75rem 1rem;
            border: 2px solid #C0A99A;
            border-radius: 9999px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .insta-search-input:focus {
            outline: none;
            border-color: #6C544E;
            box-shadow: 0 0 0 3px rgba(192, 169, 154, 0.2);
        }

        .insta-search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6C544E;
            pointer-events: none;
        }

        /* Share buttons */
        .insta-share-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            justify-content: center;
        }

        .insta-share-btn {
            padding: 0.5rem;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .insta-share-btn:hover {
            background: #C0A99A;
            color: white;
            transform: scale(1.1);
        }

        /* Animation effects */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease forwards;
        }

        .animate-scale-in {
            animation: scaleIn 0.4s ease forwards;
        }

        .insta-post-card {
            animation-fill-mode: both;
        }

        /* Account switcher */
        .insta-account-switcher {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .insta-account-btn {
            padding: 0.5rem 1rem;
            background: white;
            border: 2px solid #C0A99A;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #4A4A4A;
        }

        .insta-account-btn:hover {
            background: #F8F6F4;
        }

        .insta-account-btn.active {
            background: #6C544E;
            color: white;
            border-color: #6C544E;
        }

        /* Video indicator enhanced */
        .insta-video-play-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 5;
        }

        .insta-video-duration {
            position: absolute;
            bottom: 0.75rem;
            right: 0.75rem;
            background: rgba(0, 0, 0, 0.8);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 10;
        }

        /* Infinite scroll loading indicator */
        .insta-loading {
            text-align: center;
            padding: 2rem;
            color: #6C544E;
        }

        .insta-loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #6C544E;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Hamburger menu styles */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 0.5rem;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: white;
            margin: 3px 0;
            transition: 0.3s;
        }

        @media (max-width: 767px) {
            .hamburger {
                display: flex;
            }

            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: #6C544E;
                flex-direction: column;
                padding: 1rem 0;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                z-index: 100;
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links > div {
                padding: 0.75rem 1rem;
                width: 100%;
                justify-content: flex-start;
            }

            .mobile-only {
                display: flex !important;
            }
        }

        @media (min-width: 768px) {
            .nav-links {
                display: flex !important;
            }

            .mobile-only {
                display: none !important;
            }
        }

        /* Sticky Book Now Footer CTA */
        .sticky-book-now {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1.25rem 1rem;
            background-color: #6C544E;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 1.125rem;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);
            transition: bottom 0.3s ease;
            text-decoration: none;
            display: block;
        }

        .sticky-book-now.hidden {
            bottom: -100px;
            pointer-events: none;
        }

        .sticky-book-now:hover {
            background-color: #5a4540;
        }

        @media (min-width: 768px) {
            .sticky-book-now {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-[#F8F6F4]">

    <!-- Contact Bar (FULL WIDTH) - CONVERTED TO NAVIGATION) -->
    <section class="brown-bg text-white py-4 px-4 shadow-xl relative">
        <div class="container mx-auto flex items-center justify-between md:justify-center">
            <!-- Hamburger Menu Button (Mobile Only) -->
            <button class="hamburger" id="hamburger-btn" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <!-- Navigation Links -->
            <div class="nav-links md:flex md:flex-row md:items-center md:space-x-12" id="nav-links">
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <a href="#visit-us" class="hover:underline font-bold text-sm md:text-base">HOURS</a>
        </div>
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.27a.997.997 0 01.372 1.348l-6 10a.997.997 0 01-1.636.002l-6-10a.997.997 0 01.372-1.348A9 9 0 1121 12a.997.997 0 01-.632.923" />
            </svg>
            <a href="#policies" class="hover:underline font-bold text-sm md:text-base">POLICIES</a>
        </div>
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L20 20M4 16l4.586-4.586a2 2 0 002.828 0L20 20M4 16l4.586-4.586a2 2 0 012.828 0L20 20" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12h.01M18 12h.01M12 12h.01M9 12h.01" />
            </svg>
            <a href="#my-work" class="hover:underline font-bold text-sm md:text-base">MY WORK</a>
        </div>
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9.247L10.5 11.25M15.772 9.247L13.5 11.25m-2.272 0V17.25m0-6V7.75" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <a href="#faq" class="hover:underline font-bold text-sm md:text-base">FAQ</a>
        </div>
        <!-- BOOK NOW - Mobile Only -->
        <div class="flex items-center mobile-only">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <a href="#booking" class="hover:underline font-bold text-sm md:text-base">BOOK NOW</a>
        </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12 md:px-8">

        <!-- Meet The Nail Tech Section -->
        <section class="mb-16">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <!-- Text Content -->
                <div class="text-center lg:text-left order-2 lg:order-1">
                    <h2 class="text-4xl md:text-5xl font-playfair font-bold accent-color">Meet your</h2>
                    <h3 class="text-5xl md:text-6xl font-extrabold tracking-tight mt-2">NAIL TECH</h3>
                    <div class="mt-6 text-sm md:text-base leading-relaxed space-y-4">
                        <p class="text-2xl font-bold accent-color">✨ Welcome to Beauty Hive ✨</p>
                        <p>Hi, I'm Brenda! I've been creating nail magic since 2019—starting out in my own little studio, then sharpening my skills at a busy nail shop, and now I'm back in a space that's entirely mine (and filled with the plants I adore 🌿).</p>

                        <p>For me, nails aren't just about color—they're about self-expression, care, and confidence. I love blending creativity with clean, lasting techniques to give you nails that feel just as good as they look.</p>

                        <p>From Gel-X and Acrylics to Builder Gel and pedicures, I'm here to turn your nail goals into reality—whether that's sleek and minimal or bold and artistic.</p>

                        <p>Step into my little plant-filled haven, relax, and let's create something beautiful together.</p>
                    </div>
                </div>

                <!-- Nail Tech Photo -->
                <div class="order-1 lg:order-2 flex justify-center">
                    <div class="max-w-sm w-full rounded-lg overflow-hidden shadow-xl">
                        <img src="https://imgur.com/9eS7xDe.jpeg" onerror="this.onerror=null;this.src='https://placehold.co/600x600/F8F6F4/C0A99A?text=Nail+Tech+Photo';" alt="Brenda, your nail tech" class="w-full h-auto object-cover rounded-lg">
                        <div class="p-4 bg-white text-center">
                            <a href="#booking" onclick="if(typeof fbq !== 'undefined') fbq('track', 'Schedule');" class="inline-block px-6 py-3 rounded-full text-white font-semibold brown-bg hover:opacity-90">BOOK NOW</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Visit Us Section -->
        <section id="visit-us" class="text-center mb-16">
            <h4 class="text-3xl font-playfair accent-color">VISIT US</h4>
            <div class="flex flex-col items-center justify-center space-y-2 mt-6 text-base font-semibold">
                <!-- Combined Hours on one line -->
                <p class="text-center mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    MON - FRIDAY: 8AM - 5PM | SATURDAY : 9AM - 5PM
                </p>
                <!-- Address -->
                <p class="text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    6244 El Cajon Blvd 21, San Diego, CA 92115
                </p>
            </div>
        </section>

        <!-- Policies Section -->
        <section id="policies" class="mb-16">
            <h4 class="text-4xl md:text-5xl text-center font-playfair accent-color mb-8">Booking Policies</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Cancellation & Rescheduling -->
                <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                    <div class="brown-bg rounded-full p-3 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                          <line x1="16" y1="12" x2="8" y2="20" stroke="currentColor" stroke-width="2"/>
                          <line x1="8" y1="12" x2="16" y2="20" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <h5 class="text-xl font-bold mb-2">CANCELLATION & RESCHEDULING</h5>
                    <p class="text-sm">A 48-HOUR NOTICE IS REQUIRED FOR ALL CANCELLATIONS OR RESCHEDULING.</p>
                </div>
                <!-- Payments -->
                <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                    <div class="brown-bg rounded-full p-3 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                    </div>
                    <h5 class="text-xl font-bold mb-2">PAYMENTS</h5>
                    <p class="text-sm">We accept all major credit cards and debit cards. A $5 processing fee may apply. Venmo, Cash app and Apple Pay. Cash payments are preferred</p>
                </div>
                <!-- Appointments -->
                <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                    <div class="brown-bg rounded-full p-3 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 16l2 2 4-4" />
                        </svg>
                    </div>
                    <h5 class="text-xl font-bold mb-2">APPOINTMENTS</h5>
                    <p class="text-sm">Please arrive promptly for your appointment so we can make the most of your time. If you're bringing a guest, they're welcome to relax in our cozy waiting area while you get pampered.</p>
                </div>
                <!-- Later Arrivals -->
                <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                    <div class="brown-bg rounded-full p-3 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                          <line x1="17" y1="7" x2="7" y2="17" stroke="currentColor" stroke-width="2"/>
                          <line x1="7" y1="7" x2="17" y2="17" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <h5 class="text-xl font-bold mb-2">LATE ARRIVALS & NO SHOWS</h5>
                    <p class="text-sm">We have a 15-minute grace period. If you are more than 15 minutes late, your design might have to change depending on my day No-shows will also be charged the full service price.</p>
                </div>
            </div>
            <!-- NOTE: The repetitive 'BOOK NOW' button here was removed as the Square section handles this -->
        </section>

        <!-- ACUITY SCHEDULING WIDGET (AFTER POLICIES) -->
        <section id="booking" class="bg-[#F8F6F4] py-8 md:py-12 mb-16">
            <div class="container mx-auto px-4 md:px-8 text-center">
                <h4 class="text-4xl md:text-5xl text-center font-playfair accent-color mb-8">BOOK YOUR APPOINTMENT</h4>
                <div class="max-w-xl mx-auto">
                    <!-- Embed Code for Acuity Scheduling Widget -->
                    <iframe src="https://app.acuityscheduling.com/schedule.php?owner=37153930&ref=embedded_csp" title="Schedule Appointment" width="100%" height="800" frameBorder="0" allow="payment"></iframe>
                    <script src="https://embed.acuityscheduling.com/js/embed.js" type="text/javascript"></script>
                </div>
            </div>
        </section>

        <!-- Information & FAQ Section -->
        <section class="mb-16">
            <h4 class="text-4xl md:text-5xl text-center font-playfair accent-color mb-8">NAIL CARE INFORMATION</h4>

            <div id="nail-care-grid" class="grid md:grid-cols-2 gap-4">
                <!-- BEFORE APPOINTMENT COLUMN -->
                <div class="nail-care-content">
                    <div class="bg-light-brown-bg text-center py-4 rounded-t-md shadow-lg font-bold">BEFORE YOUR APPOINTMENT</div>
                    <div class="bg-white p-4 rounded-b-md shadow-lg space-y-3 text-sm nail-care-list-container">
                        <p class="text-left"><span class="font-bold text-lg mr-2">🚫</span> Avoid using cuticle oils, hand lotions, or sunscreen right before your appointment – these can affect product adhesion.</p>
                        <p class="text-left"><span class="font-bold text-lg mr-2">✍️</span> Bring any nail-art inspo photos you love!</p>
                        <p class="text-left"><span class="font-bold text-lg mr-2">⏳</span> Be on time to get the most out of your appointment.</p>
                        <p class="text-left"><span class="font-bold text-lg mr-2">❌</span> Avoid peeling or picking at your nails in the days leading up to your appointment to prevent damage to your natural nails.</p>
                    </div>
                </div>

                <!-- AFTER APPOINTMENT COLUMN -->
                <div class="nail-care-content">
                    <div class="bg-light-brown-bg text-center py-4 rounded-t-md shadow-lg font-bold">AFTER YOUR APPOINTMENT</div>
                    <div class="bg-white p-4 rounded-b-md shadow-lg space-y-3 text-sm nail-care-list-container">
                        <p class="text-left"><span class="font-bold text-lg mr-2">💧</span> Moisturize your cuticles daily with cuticle oil or hand cream to keep them nourished.</p>
                        <p class="text-left"><span class="font-bold text-lg mr-2">🚫</span> Avoid using your nails as tools—use the pads of your fingers instead.</p>
                        <p class="text-left"><span class="font-bold text-lg mr-2">🧤</span> Wear gloves for cleaning, gardening, or dishwashing to protect your nails from harsh chemicals and water exposure.</p>
                        <p class="text-left"><span class="font-bold text-lg mr-2">🧽</span> Avoid harsh cleaning products and acetone-based removers—they can dull your finish or weaken enhancements.(or just use gloves)</p>
                    </div>
                </div>
            </div>

            <!-- Interactive Portfolio Section -->
            <section id="my-work" class="mb-16 mt-16">
                <h4 class="text-4xl md:text-5xl text-center font-playfair accent-color mb-8">MY WORK</h4>
                <div id="portfolio-buttons" class="flex flex-wrap justify-center gap-4 mb-8">
                    <!-- Buttons will be generated here by JavaScript -->
                </div>
                <div id="portfolio-gallery" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Images will be generated here by JavaScript -->
                </div>
            </section>

            <!-- Book Now Button (Desktop Only) -->
            <div class="hidden md:flex justify-center mb-16">
                <a href="#booking" onclick="if(typeof fbq !== 'undefined') fbq('track', 'Schedule');" class="inline-block px-8 py-4 rounded-full text-white text-lg font-bold brown-bg hover:opacity-90 transition-opacity shadow-lg">BOOK NOW</a>
            </div>

            <!-- FAQ Section -->
            <section id="faq" class="space-y-6">
                <h4 class="text-4xl md:text-5xl text-center font-playfair accent-color mb-8">FAQ</h4>
                <div>
                    <h5 class="text-lg font-bold">Q: WHAT IS THE POLICY ON FILLS AND REPAIRS?</h5>
                    <p class="mt-2 text-sm">Fills are recommended every 2-3 weeks to maintain the health of your nails. After 4 weeks, your service will be considered a full set. Repairs for broken nails are complimentary for the first 3 days after your appointment.</p>
                </div>
                <div>
                    <h5 class="text-lg font-bold">Q: DO I NEED TO REMOVE MY OLD SET?</h5>
                    <p class="mt-2 text-sm">Please arrive with your bare nails, free of any old polish or product. A removal fee will be added if a removal service is required. This ensures proper prep and application for your new set.</p>
                </div>
                <div>
                    <h5 class="text-lg font-bold">Q: HOW DO I CARE FOR MY NAIL ART?</h5>
                    <p class="mt-2 text-sm">To maintain your nail art, apply cuticle oil daily and a clear top coat every few days. Avoid picking or filing your nails, as this can damage the design and the nail bed.</p>
                </div>
            </section>
        </main>

        <!-- Tag Us Section (Instagram Embed) -->
        <section class="text-center mb-16">
            <h4 class="text-4xl md:text-5xl font-playfair accent-color">TAG US IN YOUR</h4>
            <h5 class="text-5xl md:text-6xl font-extrabold tracking-tight mt-2">Nailfies</h5>
            <div class="mt-8">
                <!-- Elfsight Social Feed Integration -->
                <script src="https://elfsightcdn.com/platform.js" async></script>
                <div class="elfsight-app-d6a6f61d-36b9-4fcc-b0cb-2cdae99d23d3" data-elfsight-app-lazy></div>
            </div>
        </section>

    <!-- Footer -->
    <footer class="text-center py-12">
        <hr class="border-gray-300 w-1/2 mx-auto mb-8">
        <h6 class="text-2xl font-bold mb-4">THANK YOU FOR TRUSTING OUR BRAND!</h6>
        <p class="text-4xl font-playfair accent-color mb-4">XOXO</p>
        <p class="text-lg font-bold mb-4">THE BEAUTY HIVE</p>
        <div class="text-sm text-gray-600 mt-6">
            <a href="/privacy-policy" class="hover:underline">Privacy Policy</a>
        </div>
    </footer>

    <!-- Image Modal -->
    <div id="image-modal" class="modal">
        <span class="modal-close">&times;</span>
        <div class="modal-content-container">
            <!-- Content will be an img or iframe for video -->
        </div>
    </div>

    <!-- Sticky Book Now Footer CTA (Mobile Only) -->
    <a href="#booking" onclick="if(typeof fbq !== 'undefined') fbq('track', 'Schedule');" class="sticky-book-now hidden" id="sticky-book-now">BOOK NOW</a>

</body>
<script>
    // Data structure to hold portfolio information
    const portfolioData = {
        "Gel-X Sets": [
            { type: 'image', url: "https://imgur.com/4iwRNPy.jpeg" },
            { type: 'image', url: "https://imgur.com/sVWLAkG.jpeg" },
            { type: 'image', url: "https://imgur.com/pHJKgQd.jpeg" },
            { type: 'image', url: "https://imgur.com/HY5HtDd.jpeg" }
        ],
        "Acrylic Sets": [
            { type: 'image', url: "https://i.imgur.com/vT2iKJO.jpeg" },
            { type: 'image', url: "https://i.imgur.com/8BUHAuu.jpeg" },
            { type: 'image', url: "https://i.imgur.com/Cno9uaU.jpeg" },
            { type: 'image', url: "https://i.imgur.com/Yn8fK9l.jpeg" }
        ],
        "Builder Gel Sets": [
            { type: 'image', url: "https://imgur.com/5TeFuun.jpeg" },
            { type: 'image', url: "https://imgur.com/Q7STdUU.jpeg" },
            { type: 'image', url: "https://imgur.com/j13cQ93.jpeg" },
            { type: 'image', url: "https://imgur.com/j3Drim2.jpeg" }
        ],
        "Pedicures": [
            { type: 'image', url: "https://imgur.com/YAMI8Wj.jpeg" },
            { type: 'image', url: "https://imgur.com/4Fa1sfN.jpeg" },
            { type: 'image', url: "https://imgur.com/nV9cTWb.jpeg" },
            { type: 'image', url: "https://imgur.com/qSoXlh9.jpeg" }
        ]
    };

    // DOM elements
    const portfolioButtons = document.getElementById('portfolio-buttons');
    const portfolioGallery = document.getElementById('portfolio-gallery');
    const imageModal = document.getElementById('image-modal');
    const modalContentContainer = imageModal.querySelector('.modal-content-container');
    const modalClose = imageModal.querySelector('.modal-close');

    // Function to render the gallery for a given service
    function renderGallery(serviceName) {
        portfolioGallery.innerHTML = ''; // Clear previous images/videos
        const items = portfolioData[serviceName];
        if (items) {
            items.forEach(item => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'w-full h-auto object-cover rounded-lg shadow-md cursor-pointer relative overflow-hidden';
                galleryItem.onclick = () => showModal(item.type, item.url);

                if (item.type === 'image') {
                    const img = document.createElement('img');
                    img.src = item.url;
                    img.alt = serviceName + ' photo';
                    img.className = 'w-full h-auto rounded-lg';
                    galleryItem.appendChild(img);
                } else if (item.type === 'video') {
                    const videoPlaceholder = document.createElement('img');
                    // Use a generic placeholder for video thumbnail
                    videoPlaceholder.src = "https://placehold.co/600x600/6C544E/FFFFFF?text=Video";
                    videoPlaceholder.alt = serviceName + ' video';
                    videoPlaceholder.className = 'w-full h-auto rounded-lg';
                    galleryItem.appendChild(videoPlaceholder);

                    const playButton = document.createElement('span');
                    playButton.innerHTML = '&#9658;'; // Unicode for play button
                    playButton.className = 'play-button';
                    galleryItem.appendChild(playButton);
                }

                portfolioGallery.appendChild(galleryItem);
            });
        }
    }

    // Function to handle button clicks
    function handleButtonClick(event) {
        // Remove 'active' class from all buttons
        document.querySelectorAll('.portfolio-btn').forEach(btn => {
            btn.classList.remove('active');
        });

        // Add 'active' class to the clicked button
        event.target.classList.add('active');

        // Get the service name
        const serviceName = event.target.dataset.service;

        // Debug logging
        console.log('Service clicked:', serviceName);
        console.log('Facebook Pixel available:', typeof fbq !== 'undefined');

        // Track ViewContent event with Facebook Pixel
        if (typeof fbq !== 'undefined') {
            console.log('Firing ViewContent event for:', serviceName);
            fbq('track', 'ViewContent', {
                content_name: serviceName,
                content_category: 'Nail Services',
                content_type: 'service'
            });
        } else {
            console.warn('Facebook Pixel (fbq) not loaded yet');
        }

        // Render the new gallery
        renderGallery(serviceName);
    }

    // Function to create the interactive buttons
    function createButtons() {
        Object.keys(portfolioData).forEach((serviceName, index) => {
            const button = document.createElement('button');
            button.className = 'portfolio-btn';
            button.textContent = serviceName;
            button.dataset.service = serviceName;
            button.addEventListener('click', handleButtonClick);
            portfolioButtons.appendChild(button);

            // Set the first button as active on initial load
            if (index === 0) {
                button.classList.add('active');
            }
        });
    }

    // Function to show the modal with the clicked media
    function showModal(type, url) {
        modalContentContainer.innerHTML = '';
        if (type === 'image') {
            const img = document.createElement('img');
            img.src = url;
            img.className = 'modal-content';
            modalContentContainer.appendChild(img);
        } else if (type === 'video') {
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.className = 'modal-content w-full h-full';
            iframe.setAttribute('allowfullscreen', 'true');
            iframe.setAttribute('frameborder', '0');
            modalContentContainer.appendChild(iframe);
        }
        imageModal.style.display = 'flex';
    }

    // Function to hide the modal
    function hideModal() {
        imageModal.style.display = 'none';
        modalContentContainer.innerHTML = ''; // Clear content on close
    }

    // Event listeners for the modal
    modalClose.onclick = hideModal;
    imageModal.onclick = (event) => {
        if (event.target === imageModal) {
            hideModal();
        }
    };

    // Hamburger menu toggle
    const hamburgerBtn = document.getElementById('hamburger-btn');
    const navLinks = document.getElementById('nav-links');

    if (hamburgerBtn) {
        hamburgerBtn.addEventListener('click', function() {
            navLinks.classList.toggle('active');
        });

        // Close menu when clicking on a link
        const navLinksItems = navLinks.querySelectorAll('a');
        navLinksItems.forEach(link => {
            link.addEventListener('click', function() {
                navLinks.classList.remove('active');
            });
        });
    }

    // Sticky Book Now Footer CTA - Show after scrolling past book now button
    function initStickyFooterCTA() {
        const stickyBookNow = document.getElementById('sticky-book-now');
        if (!stickyBookNow) return;

        // Find the first book now button (under nail tech photo)
        const bookNowLinks = document.querySelectorAll('a[href="#booking"]');
        let firstBookNowButton = null;

        // Find the button that's in the nail tech section (not in nav or sticky or desktop button)
        for (let link of bookNowLinks) {
            if (link.id !== 'sticky-book-now' && !link.closest('.nav-links') && !link.closest('.hidden.md\\:flex')) {
                firstBookNowButton = link;
                break;
            }
        }

        if (!firstBookNowButton) return;

        function checkScroll() {
            const buttonRect = firstBookNowButton.getBoundingClientRect();
            const windowHeight = window.innerHeight;

            // Check if the original button is visible in the viewport
            const isButtonVisible = buttonRect.top >= 0 && buttonRect.top < windowHeight;

            if (isButtonVisible) {
                // Original button is visible, hide sticky
                stickyBookNow.classList.add('hidden');
            } else if (buttonRect.bottom < 0) {
                // Original button is above viewport (scrolled past), show sticky
                stickyBookNow.classList.remove('hidden');
            }
        }

        window.addEventListener('scroll', checkScroll);
        // Check on load
        checkScroll();
    }

    // Initial page load setup
    window.onload = function() {
        createButtons();
        // Render the gallery for the first service by default
        renderGallery(Object.keys(portfolioData)[0]);

        // Initialize sticky footer CTA
        initStickyFooterCTA();

        // Initialize Instagram Feed (DISABLED - uncomment when ready)
        // initInstagramFeed();
    };

    // ============================================
    // INSTAGRAM FEED WIDGET - AUTO-UPDATE VERSION
    // ============================================

    // Instagram API Configuration
    // IMPORTANT: Add your Instagram Access Token here after setup
    // See INSTAGRAM_API_SETUP.md for instructions on getting your token
    const INSTAGRAM_CONFIG = {
        accessToken: '', // ADD YOUR ACCESS TOKEN HERE (leave empty to use manual posts)
        userId: '', // This will be auto-detected from the token
        postsLimit: 25, // Number of posts to fetch
        cacheExpiry: 3600000, // Cache for 1 hour (in milliseconds)
        enableInfiniteScroll: true, // Enable infinite scroll (set to false to use Load More button)
        enableAnimations: true // Enable entrance animations
    };

    // Multiple Instagram Accounts Configuration
    // Add more accounts here to switch between them
    const INSTAGRAM_ACCOUNTS = {
        'main': {
            name: '@isssbeenails',
            username: '@isssbeenails',
            profilePicUrl: 'https://placehold.co/150x150/6C544E/FFFFFF?text=TBH',
            postsCount: 124,
            followersCount: 1847,
            followingCount: 312,
            bio: '✨ Professional Nail Artist<br>💅 Gel-X | Acrylics | Builder Gel | Pedicures<br>📍 San Diego, CA<br>🔗 Book your appointment below!',
            instagramUrl: 'https://instagram.com/isssbeenails',
            accessToken: '' // Separate token if needed
        }
        // Add more accounts like this:
        // 'secondary': {
        //     name: '@another_account',
        //     username: '@another_account',
        //     ...
        // }
    };

    // Instagram Profile Configuration
    const instagramProfile = {
        username: '@isssbeenails',
        profilePicUrl: 'https://placehold.co/150x150/6C544E/FFFFFF?text=TBH',
        postsCount: 124,
        followersCount: 1847,
        followingCount: 312,
        bio: '✨ Professional Nail Artist<br>💅 Gel-X | Acrylics | Builder Gel | Pedicures<br>📍 San Diego, CA<br>🔗 Book your appointment below!',
        instagramUrl: 'https://instagram.com/isssbeenails'
    };

    // Instagram Posts Data
    // TO UPDATE: Simply add new posts to this array with image URL, caption, likes, and comments
    const instagramPosts = [
        {
            id: 1,
            type: 'image',
            imageUrl: 'https://i.imgur.com/4iwRNPy.jpeg',
            caption: 'Stunning chrome nails for the weekend! ✨💅 #nailart #gelnails #chromenails',
            likes: 156,
            comments: 23,
            date: '2025-10-03'
        },
        {
            id: 2,
            type: 'image',
            imageUrl: 'https://i.imgur.com/sVWLAkG.jpeg',
            caption: 'Fresh set of acrylics with a beautiful nude design 💕 #acrylicnails #naildesign',
            likes: 189,
            comments: 31,
            date: '2025-10-02'
        },
        {
            id: 3,
            type: 'image',
            imageUrl: 'https://i.imgur.com/pHJKgQd.jpeg',
            caption: 'Love this French tip variation! 🤍 #frenchtips #nailinspo',
            likes: 214,
            comments: 28,
            date: '2025-10-01'
        },
        {
            id: 4,
            type: 'image',
            imageUrl: 'https://i.imgur.com/HY5HtDd.jpeg',
            caption: 'Bold and beautiful! 💋 #nailsofinstagram #beautyhive',
            likes: 178,
            comments: 19,
            date: '2025-09-30'
        },
        {
            id: 5,
            type: 'image',
            imageUrl: 'https://i.imgur.com/vT2iKJO.jpeg',
            caption: 'Perfect for fall season 🍂 #fallnails #autumnvibes',
            likes: 201,
            comments: 35,
            date: '2025-09-29'
        },
        {
            id: 6,
            type: 'image',
            imageUrl: 'https://i.imgur.com/8BUHAuu.jpeg',
            caption: 'Elegance at its finest ✨ #elegantnails #nailtech',
            likes: 167,
            comments: 22,
            date: '2025-09-28'
        },
        {
            id: 7,
            type: 'image',
            imageUrl: 'https://i.imgur.com/Cno9uaU.jpeg',
            caption: 'Another happy client! 💖 #clientlove #nailgoals',
            likes: 192,
            comments: 27,
            date: '2025-09-27'
        },
        {
            id: 8,
            type: 'image',
            imageUrl: 'https://i.imgur.com/Yn8fK9l.jpeg',
            caption: 'Classic never goes out of style 💅 #classicnails #timeless',
            likes: 145,
            comments: 18,
            date: '2025-09-26'
        },
        {
            id: 9,
            type: 'image',
            imageUrl: 'https://i.imgur.com/5TeFuun.jpeg',
            caption: 'Builder gel perfection! 🌟 #buildergel #strongnails',
            likes: 183,
            comments: 24,
            date: '2025-09-25'
        },
        {
            id: 10,
            type: 'image',
            imageUrl: 'https://i.imgur.com/Q7STdUU.jpeg',
            caption: 'Loving these clean lines 📐 #minimalnails #cleanaesthetic',
            likes: 176,
            comments: 20,
            date: '2025-09-24'
        },
        {
            id: 11,
            type: 'image',
            imageUrl: 'https://i.imgur.com/j13cQ93.jpeg',
            caption: 'Soft pink and white combo 🤍💕 #softnails #pinkandwhite',
            likes: 198,
            comments: 29,
            date: '2025-09-23'
        },
        {
            id: 12,
            type: 'image',
            imageUrl: 'https://i.imgur.com/j3Drim2.jpeg',
            caption: 'Natural looking enhancement 🌿 #naturalnails #enhancement',
            likes: 162,
            comments: 21,
            date: '2025-09-22'
        }
    ];

    // State management
    let currentView = 'grid';
    let displayedPostsCount = 8;
    let activePosts = [...instagramPosts]; // Will be replaced with API data if available
    let allPosts = [...instagramPosts]; // Keep unfiltered copy
    let carouselIndex = 0;
    let sliderScrollPosition = 0;
    let searchQuery = '';
    let isLoading = false;
    let currentAccount = 'main';
    let infiniteScrollObserver = null;

    // ============================================
    // INSTAGRAM API INTEGRATION
    // ============================================

    async function fetchInstagramPosts() {
        // If no access token, use manual posts
        if (!INSTAGRAM_CONFIG.accessToken) {
            console.log('📝 Using manual posts (no access token provided)');
            return instagramPosts;
        }

        // Check cache first
        const cached = getCachedPosts();
        if (cached) {
            console.log('✅ Using cached Instagram posts');
            return cached;
        }

        try {
            console.log('🔄 Fetching fresh posts from Instagram API...');

            // Fetch user's media
            const response = await fetch(
                `https://graph.instagram.com/me/media?fields=id,caption,media_type,media_url,thumbnail_url,permalink,timestamp,like_count,comments_count&access_token=${INSTAGRAM_CONFIG.accessToken}&limit=${INSTAGRAM_CONFIG.postsLimit}`
            );

            if (!response.ok) {
                throw new Error(`Instagram API error: ${response.status}`);
            }

            const data = await response.json();

            // Transform Instagram API data to our format (INCLUDING VIDEOS!)
            const transformedPosts = data.data
                .filter(post => ['IMAGE', 'VIDEO', 'CAROUSEL_ALBUM'].includes(post.media_type))
                .map((post, index) => ({
                    id: index + 1,
                    type: post.media_type === 'VIDEO' ? 'video' : 'image',
                    imageUrl: post.media_type === 'VIDEO' ? post.thumbnail_url : post.media_url,
                    videoUrl: post.media_type === 'VIDEO' ? post.media_url : null,
                    caption: post.caption || '',
                    likes: post.like_count || 0,
                    comments: post.comments_count || 0,
                    date: post.timestamp.split('T')[0],
                    permalink: post.permalink
                }));

            // Cache the posts
            cachePosts(transformedPosts);

            console.log(`✅ Successfully fetched ${transformedPosts.length} posts from Instagram`);
            return transformedPosts;

        } catch (error) {
            console.error('❌ Error fetching Instagram posts:', error);
            console.log('📝 Falling back to manual posts');
            return instagramPosts;
        }
    }

    function getCachedPosts() {
        try {
            const cached = localStorage.getItem('instagram_posts_cache');
            if (!cached) return null;

            const { posts, timestamp } = JSON.parse(cached);
            const now = Date.now();

            // Check if cache is still valid
            if (now - timestamp < INSTAGRAM_CONFIG.cacheExpiry) {
                return posts;
            }

            // Cache expired
            localStorage.removeItem('instagram_posts_cache');
            return null;
        } catch (error) {
            console.error('Error reading cache:', error);
            return null;
        }
    }

    function cachePosts(posts) {
        try {
            localStorage.setItem('instagram_posts_cache', JSON.stringify({
                posts: posts,
                timestamp: Date.now()
            }));
        } catch (error) {
            console.error('Error caching posts:', error);
        }
    }

    async function initInstagramFeed() {
        // Update profile information
        updateProfileInfo();

        // Fetch posts (from API or fallback to manual)
        activePosts = await fetchInstagramPosts();
        allPosts = [...activePosts]; // Keep copy for filtering

        // Render account switcher if multiple accounts
        if (Object.keys(INSTAGRAM_ACCOUNTS).length > 1) {
            renderAccountSwitcher();
        }

        // Render search box
        renderSearchBox();

        // Render initial posts
        renderInstagramFeed();

        // Setup event listeners
        setupInstaEventListeners();

        // Setup infinite scroll if enabled
        if (INSTAGRAM_CONFIG.enableInfiniteScroll && currentView !== 'carousel') {
            setupInfiniteScroll();
        }
    }

    function updateProfileInfo() {
        document.getElementById('insta-username').textContent = instagramProfile.username;
        document.getElementById('insta-profile-pic').src = instagramProfile.profilePicUrl;
        document.getElementById('insta-posts-count').textContent = instagramProfile.postsCount;
        document.getElementById('insta-followers-count').textContent = formatNumber(instagramProfile.followersCount);
        document.getElementById('insta-following-count').textContent = formatNumber(instagramProfile.followingCount);
        document.getElementById('insta-bio').innerHTML = instagramProfile.bio;

        // Update Instagram link
        const instaLink = document.querySelector('a[href*="instagram.com"]');
        if (instaLink) {
            instaLink.href = instagramProfile.instagramUrl;
        }
    }

    function formatNumber(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        }
        return num.toString();
    }

    function renderInstagramFeed() {
        const container = document.getElementById('insta-feed-container');
        const postsToShow = activePosts.slice(0, displayedPostsCount);

        // Clear container
        container.innerHTML = '';

        // Set layout class
        container.className = `insta-${currentView}-view`;

        // Render based on view type
        if (currentView === 'carousel') {
            renderCarousel(container, postsToShow);
        } else if (currentView === 'slider') {
            renderSlider(container, postsToShow);
        } else {
            // Standard rendering for grid, masonry, list
            postsToShow.forEach(post => {
                const postElement = createPostElement(post);
                container.appendChild(postElement);
            });
        }

        // Add animations after render
        if (INSTAGRAM_CONFIG.enableAnimations) {
            setTimeout(() => addAnimations(), 50);
        }

        // Update "Load More" button visibility
        const loadMoreBtn = document.getElementById('insta-load-more');
        if (currentView === 'carousel' || currentView === 'slider') {
            loadMoreBtn.style.display = 'none'; // Hide for carousel/slider
        } else if (displayedPostsCount >= activePosts.length) {
            loadMoreBtn.style.display = 'none';
        } else {
            loadMoreBtn.style.display = 'inline-block';
        }
    }

    function renderCarousel(container, posts) {
        // Create carousel track
        const track = document.createElement('div');
        track.className = 'insta-carousel-track';
        track.style.transform = `translateX(-${carouselIndex * 100}%)`;

        posts.forEach(post => {
            const postElement = createPostElement(post);
            track.appendChild(postElement);
        });

        container.appendChild(track);

        // Add navigation buttons
        const prevBtn = document.createElement('button');
        prevBtn.className = 'carousel-nav carousel-nav-prev';
        prevBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>';
        prevBtn.onclick = () => navigateCarousel('prev');

        const nextBtn = document.createElement('button');
        nextBtn.className = 'carousel-nav carousel-nav-next';
        nextBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>';
        nextBtn.onclick = () => navigateCarousel('next');

        container.appendChild(prevBtn);
        container.appendChild(nextBtn);

        // Add dots
        const dotsContainer = document.createElement('div');
        dotsContainer.className = 'carousel-dots';

        posts.forEach((_, index) => {
            const dot = document.createElement('button');
            dot.className = `carousel-dot ${index === carouselIndex ? 'active' : ''}`;
            dot.onclick = () => navigateCarousel(index);
            dotsContainer.appendChild(dot);
        });

        container.parentElement.appendChild(dotsContainer);
    }

    function navigateCarousel(direction) {
        const totalPosts = activePosts.slice(0, displayedPostsCount).length;

        if (typeof direction === 'number') {
            carouselIndex = direction;
        } else if (direction === 'prev') {
            carouselIndex = (carouselIndex - 1 + totalPosts) % totalPosts;
        } else if (direction === 'next') {
            carouselIndex = (carouselIndex + 1) % totalPosts;
        }

        renderInstagramFeed();
    }

    function renderSlider(container, posts) {
        // Create slider track
        const track = document.createElement('div');
        track.className = 'insta-slider-track';

        posts.forEach(post => {
            const postElement = createPostElement(post);
            track.appendChild(postElement);
        });

        container.appendChild(track);

        // Add navigation buttons
        const prevBtn = document.createElement('button');
        prevBtn.className = 'slider-nav slider-nav-prev';
        prevBtn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>';
        prevBtn.onclick = () => scrollSlider('left');

        const nextBtn = document.createElement('button');
        nextBtn.className = 'slider-nav slider-nav-next';
        nextBtn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>';
        nextBtn.onclick = () => scrollSlider('right');

        container.appendChild(prevBtn);
        container.appendChild(nextBtn);
    }

    function scrollSlider(direction) {
        const track = document.querySelector('.insta-slider-track');
        if (!track) return;

        const scrollAmount = 340; // Card width + gap

        if (direction === 'left') {
            track.scrollLeft -= scrollAmount;
        } else {
            track.scrollLeft += scrollAmount;
        }
    }

    function createPostElement(post) {
        const postDiv = document.createElement('div');
        postDiv.className = 'insta-post-card';
        postDiv.onclick = () => openInstaModal(post);

        // Image
        const img = document.createElement('img');
        img.src = post.imageUrl;
        img.alt = post.caption.substring(0, 50);
        img.loading = 'lazy';
        postDiv.appendChild(img);

        // Video indicators if applicable
        if (post.type === 'video') {
            const videoIndicator = document.createElement('div');
            videoIndicator.className = 'insta-video-indicator';
            videoIndicator.innerHTML = `
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm12.553 1.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"/>
                </svg>
                Video
            `;
            postDiv.appendChild(videoIndicator);

            // Add play button overlay
            const playOverlay = document.createElement('div');
            playOverlay.className = 'insta-video-play-overlay';
            playOverlay.innerHTML = `
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/>
                </svg>
            `;
            postDiv.appendChild(playOverlay);
        }

        // Overlay for grid and masonry views
        if (currentView !== 'list') {
            const overlay = document.createElement('div');
            overlay.className = 'insta-post-overlay';
            overlay.innerHTML = `
                <div class="insta-post-stats">
                    <div class="insta-post-stat">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                        </svg>
                        <span>${formatNumber(post.likes)}</span>
                    </div>
                    <div class="insta-post-stat">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                        </svg>
                        <span>${formatNumber(post.comments)}</span>
                    </div>
                </div>
            `;
            postDiv.appendChild(overlay);
        }

        // Caption for list view
        if (currentView === 'list') {
            const caption = document.createElement('div');
            caption.className = 'insta-list-caption';
            caption.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <div class="flex gap-4">
                        <div class="insta-post-stat">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                            </svg>
                            <span>${formatNumber(post.likes)} likes</span>
                        </div>
                        <div class="insta-post-stat">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                            </svg>
                            <span>${formatNumber(post.comments)} comments</span>
                        </div>
                    </div>
                    <span class="text-xs text-gray-400">${formatDate(post.date)}</span>
                </div>
                <p>${post.caption}</p>
            `;
            postDiv.appendChild(caption);
        }

        return postDiv;
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const diffTime = Math.abs(now - date);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        if (diffDays === 0) return 'Today';
        if (diffDays === 1) return 'Yesterday';
        if (diffDays < 7) return `${diffDays} days ago`;
        if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
        if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
        return `${Math.floor(diffDays / 365)} years ago`;
    }

    function setupInstaEventListeners() {
        // View switchers
        document.getElementById('insta-view-grid').addEventListener('click', () => switchView('grid'));
        document.getElementById('insta-view-masonry').addEventListener('click', () => switchView('masonry'));
        document.getElementById('insta-view-list').addEventListener('click', () => switchView('list'));
        document.getElementById('insta-view-carousel').addEventListener('click', () => switchView('carousel'));
        document.getElementById('insta-view-slider').addEventListener('click', () => switchView('slider'));

        // Load more button
        document.getElementById('insta-load-more').addEventListener('click', loadMorePosts);

        // Modal close
        const instaModal = document.getElementById('insta-modal');
        const modalClose = instaModal.querySelector('.modal-close');
        modalClose.onclick = () => closeInstaModal();
        instaModal.onclick = (e) => {
            if (e.target === instaModal) closeInstaModal();
        };
    }

    function switchView(view) {
        currentView = view;

        // Reset carousel index when switching views
        if (view === 'carousel') {
            carouselIndex = 0;
        }

        // Update button states
        document.querySelectorAll('.insta-control-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.getElementById(`insta-view-${view}`).classList.add('active');

        // Remove any existing carousel dots
        const existingDots = document.querySelector('.carousel-dots');
        if (existingDots) {
            existingDots.remove();
        }

        // Re-render feed
        renderInstagramFeed();
    }

    function loadMorePosts() {
        displayedPostsCount += 8;
        renderInstagramFeed();
    }

    function openInstaModal(post) {
        const modal = document.getElementById('insta-modal');
        const modalContent = document.getElementById('insta-modal-content');

        modalContent.innerHTML = `
            <div class="grid md:grid-cols-2 gap-0">
                <div class="bg-black flex items-center justify-center">
                    <img src="${post.imageUrl}" alt="${post.caption}" class="max-w-full max-h-[80vh] object-contain">
                </div>
                <div class="p-6 flex flex-col">
                    <div class="flex items-center gap-3 mb-4 pb-4 border-b">
                        <img src="${instagramProfile.profilePicUrl}" alt="Profile" class="w-10 h-10 rounded-full">
                        <div>
                            <h4 class="font-bold">${instagramProfile.username}</h4>
                            <p class="text-xs text-gray-500">${formatDate(post.date)}</p>
                        </div>
                    </div>
                    <div class="flex-grow overflow-y-auto mb-4">
                        <p class="text-sm">${post.caption}</p>
                    </div>
                    <div class="pt-4 border-t">
                        <div class="flex gap-6 mb-4">
                            <button class="flex items-center gap-2 text-gray-700 hover:text-red-500 transition-colors">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                                </svg>
                                <span class="font-semibold">${formatNumber(post.likes)}</span>
                            </button>
                            <button class="flex items-center gap-2 text-gray-700 hover:text-blue-500 transition-colors">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                                </svg>
                                <span class="font-semibold">${formatNumber(post.comments)}</span>
                            </button>
                        </div>
                        <a href="${instagramProfile.instagramUrl}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-400 text-white font-semibold rounded-lg hover:shadow-lg transition-all w-full justify-center">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                            View on Instagram
                        </a>
                        ${createShareButtons(post)}
                    </div>
                </div>
            </div>
        `;

        modal.style.display = 'flex';
    }

    function closeInstaModal() {
        const modal = document.getElementById('insta-modal');
        modal.style.display = 'none';
    }

    // ============================================
    // NEW FEATURES: Search, Video, Multi-Account, Share, Animations, Infinite Scroll
    // ============================================

    function renderAccountSwitcher() {
        const container = document.getElementById('insta-feed-container');
        const switcherDiv = document.createElement('div');
        switcherDiv.className = 'insta-account-switcher';
        switcherDiv.id = 'insta-account-switcher';

        Object.keys(INSTAGRAM_ACCOUNTS).forEach(accountKey => {
            const account = INSTAGRAM_ACCOUNTS[accountKey];
            const btn = document.createElement('button');
            btn.className = `insta-account-btn ${accountKey === currentAccount ? 'active' : ''}`;
            btn.textContent = account.name;
            btn.onclick = () => switchAccount(accountKey);
            switcherDiv.appendChild(btn);
        });

        container.parentElement.insertBefore(switcherDiv, container);
    }

    async function switchAccount(accountKey) {
        currentAccount = accountKey;
        const account = INSTAGRAM_ACCOUNTS[accountKey];

        // Update profile
        instagramProfile.username = account.username;
        instagramProfile.profilePicUrl = account.profilePicUrl;
        instagramProfile.postsCount = account.postsCount;
        instagramProfile.followersCount = account.followersCount;
        instagramProfile.followingCount = account.followingCount;
        instagramProfile.bio = account.bio;
        instagramProfile.instagramUrl = account.instagramUrl;

        updateProfileInfo();

        // Update active button
        document.querySelectorAll('.insta-account-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');

        // Fetch new posts (would use account-specific token in real scenario)
        activePosts = await fetchInstagramPosts();
        allPosts = [...activePosts];
        displayedPostsCount = 8;
        renderInstagramFeed();
    }

    function renderSearchBox() {
        const container = document.getElementById('insta-feed-container');
        const searchDiv = document.createElement('div');
        searchDiv.className = 'insta-search-box';
        searchDiv.innerHTML = `
            <input
                type="text"
                class="insta-search-input"
                id="insta-search-input"
                placeholder="Search posts by caption or hashtags..."
                value="${searchQuery}"
            />
            <svg class="w-5 h-5 insta-search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
        `;

        container.parentElement.insertBefore(searchDiv, container);

        // Add search listener
        document.getElementById('insta-search-input').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            filterPosts();
        });
    }

    function filterPosts() {
        if (!searchQuery.trim()) {
            activePosts = [...allPosts];
        } else {
            const query = searchQuery.toLowerCase();
            activePosts = allPosts.filter(post =>
                post.caption.toLowerCase().includes(query)
            );
        }
        displayedPostsCount = 8;
        renderInstagramFeed();
    }

    function setupInfiniteScroll() {
        // Clean up existing observer
        if (infiniteScrollObserver) {
            infiniteScrollObserver.disconnect();
        }

        // Create sentinel element
        let sentinel = document.getElementById('insta-scroll-sentinel');
        if (!sentinel) {
            sentinel = document.createElement('div');
            sentinel.id = 'insta-scroll-sentinel';
            sentinel.style.height = '1px';
            document.getElementById('insta-feed-container').parentElement.appendChild(sentinel);
        }

        // Create intersection observer
        infiniteScrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !isLoading && displayedPostsCount < activePosts.length) {
                    loadMorePosts();
                }
            });
        }, {
            rootMargin: '200px'
        });

        infiniteScrollObserver.observe(sentinel);
    }

    function addAnimations() {
        if (!INSTAGRAM_CONFIG.enableAnimations) return;

        const posts = document.querySelectorAll('.insta-post-card');
        posts.forEach((post, index) => {
            post.style.opacity = '0';
            post.style.animationDelay = `${index * 0.05}s`;
            post.classList.add('animate-fade-in-up');
        });
    }

    function sharePost(post, platform) {
        const url = post.permalink || instagramProfile.instagramUrl;
        const text = post.caption ? post.caption.substring(0, 100) : 'Check out this post!';

        let shareUrl = '';

        switch(platform) {
            case 'facebook':
                shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                break;
            case 'twitter':
                shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
                break;
            case 'pinterest':
                shareUrl = `https://pinterest.com/pin/create/button/?url=${encodeURIComponent(url)}&media=${encodeURIComponent(post.imageUrl)}&description=${encodeURIComponent(text)}`;
                break;
            case 'copy':
                navigator.clipboard.writeText(url).then(() => {
                    alert('Link copied to clipboard!');
                });
                return;
        }

        if (shareUrl) {
            window.open(shareUrl, '_blank', 'width=600,height=400');
        }
    }

    function createShareButtons(post) {
        return `
            <div class="insta-share-buttons">
                <button class="insta-share-btn" onclick="sharePost(${JSON.stringify(post).replace(/"/g, '&quot;')}, 'facebook')" title="Share on Facebook">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                </button>
                <button class="insta-share-btn" onclick="sharePost(${JSON.stringify(post).replace(/"/g, '&quot;')}, 'twitter')" title="Share on Twitter">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                </button>
                <button class="insta-share-btn" onclick="sharePost(${JSON.stringify(post).replace(/"/g, '&quot;')}, 'pinterest')" title="Share on Pinterest">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"/></svg>
                </button>
                <button class="insta-share-btn" onclick="sharePost(${JSON.stringify(post).replace(/"/g, '&quot;')}, 'copy')" title="Copy Link">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                </button>
            </div>
        `;
    }

    // Expose sharePost to global scope for onclick handlers
    window.sharePost = sharePost;
</script>
